(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{2642:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/share/[share]",function(){return n(8588)}])},1433:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var s=n(5893),r=n(7294);let l=e=>{let{value:t="",placeHolder:n,onUpdate:l,size:a="sm"}=e,[i,d]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),u=(0,r.useRef)(),h=(0,r.useRef)();(0,r.useEffect)(()=>{d(t)},[]);let x=()=>{c(!0)};(0,r.useEffect)(()=>{o&&h.current.focus()},[o]);let m=()=>{d(h.current.value),c(!1),l&&l(h.current.value)},f=e=>{("Enter"===e.code||"Enter"===e.key)&&m()};return(0,s.jsx)(s.Fragment,{children:o?(0,s.jsx)("div",{children:(0,s.jsx)("input",{className:"input input-".concat(a," input-ghost w-full max-w-xs"),ref:h,type:"text",placeholder:n,defaultValue:i,onBlur:m,onKeyUp:f})}):(0,s.jsx)("div",{ref:u,onDoubleClick:x,children:i.length>0?i:(0,s.jsx)("span",{className:"text-primary/50",children:n})})})};var a=n(175),i=n(3416),d=n(9019);(0,a.c)([]);let o=(e,t,n)=>{let s=(0,d.rR)(e);if(s){let e=s.find(e=>e._id===t);(null==n?void 0:n.name)&&(e.name=n.name),(null==n?void 0:n.done)&&(e.done=n.done),(0,d.WG)();return}},c=(e,t)=>{let n=(0,d._7)(e);if(n){console.log("a");let e=n.todos.filter(e=>e._id!==t);console.log(e),n.todos=e,(0,d.WG)()}},u=e=>{let t=(0,d.rR)(e),n={done:!1,name:"",_id:(0,i.x0)(6)};return t?(t.push(n),(0,d.WG)(),n):null},h=e=>{let{todos:t,cardId:n}=e,[a,i]=(0,r.useState)(t),h=(e,t)=>{console.log("update",e,t),o(n,e,{name:t})},x=(e,t)=>{o(n,e,{done:t})},m=e=>{c(n,e),(0,d.rR)(n),i(t=>t.filter(t=>t._id!==e))},f=()=>{let e=u(n);if(e){let e=(0,d.rR)(n);i([...e])}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"btn btn-square btn-outline w-full mb-4",onClick:f,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"currentColor",d:"M17.5 21h1v-2.5H21v-1h-2.5V15h-1v2.5H15v1h2.5V21Zm.5 2q-2.075 0-3.538-1.463T13 18q0-2.075 1.463-3.538T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23ZM9 7V5h12v2H9ZM5 20q-.825 0-1.413-.588T3 18q0-.825.588-1.413T5 16q.825 0 1.413.588T7 18q0 .825-.588 1.413T5 20Zm0-6q-.825 0-1.413-.588T3 12q0-.825.588-1.413T5 10q.825 0 1.413.588T7 12q0 .825-.588 1.413T5 14Zm0-6q-.825 0-1.413-.588T3 6q0-.825.588-1.413T5 4q.825 0 1.413.588T7 6q0 .825-.588 1.413T5 8Zm4 11v-2h2.075Q11 17.5 11 18t.075 1H9Zm0-6v-2h9q-1.425 0-2.675.537T13.125 13H9Z"})}),(0,s.jsx)("span",{children:"ajouter une todo"})]}),(0,s.jsx)("ul",{className:"list-outside text-base-100 flex flex-col gap-y-3",children:a.map((e,t)=>(0,s.jsxs)("li",{className:"flex flex-row gap-x-3",children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:e.done,onChange:t=>x(e._id,t.target.checked),className:"checkbox"}),(0,s.jsx)("div",{className:"text-primary break-all",children:(0,s.jsx)(l,{placeHolder:"todo",value:e.name,size:"xs",onUpdate:t=>h(e._id,t)})}),(0,s.jsx)("button",{className:"btn btn-square btn-xs ml-auto",onClick:()=>m(e._id),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},e._id))})]})};var x=n(7373),m=n(3218);let f=e=>{let{tag:t,deleteTag:n}=e,r=()=>{n(t)};return(0,s.jsxs)("div",{className:"badge badge-outline uppercase font-semibold",children:[t.name,(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-4 h-4 stroke-current",onClick:r,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})},g=e=>{let{card:t,tags:n}=e,l=(0,m.o)(x.q1),[a,o]=(0,r.useState)(n),[c,u]=(0,r.useState)(""),h=e=>{(0,d.SQ)(t,e),o(t=>[...t,e])},g=e=>{(0,d.Kb)(t,e),o(t=>t.filter(t=>t._id!==e._id))},p=e=>{if("Enter"===e.code||"Enter"===e.key){let e={name:c,_id:(0,i.x0)(5)};(0,x._U)(e),h(e),u(""),(0,d.WG)()}};return(0,s.jsxs)("div",{className:"card-actions justify-end",children:[a.map(e=>(0,s.jsx)(f,{tag:e,deleteTag:g},e._id)),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,className:"btn m-1",children:"Add tag"}),(0,s.jsxs)("ul",{tabIndex:0,className:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-64",children:[(0,s.jsx)("li",{children:(0,s.jsx)("input",{className:"input input-bordered",type:"text",value:c,placeholder:"nouveau tag",onChange:e=>u(e.target.value),onKeyUp:p})}),l.map(e=>(0,s.jsx)("li",{onClick:()=>h(e),children:(0,s.jsx)("a",{children:e.name})},"".concat(t._id,"-").concat(e._id)))]})]})]})},p=e=>{let{state:t}=e,[n,a]=(0,r.useState)(t.todos),[i,o]=(0,r.useState)(t.name),c=()=>{(0,d.f1)(t._id)};return(0,s.jsxs)("div",{className:"card w-96 bg-neutral shadow-xl",children:[(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"card-actions justify-end",children:(0,s.jsx)("button",{className:"btn btn-square btn-sm",onClick:c,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),(0,s.jsx)("h2",{className:"card-title text-primary",children:(0,s.jsx)(l,{placeHolder:"title",value:i,onUpdate:e=>(0,d.xi)(t._id,e)})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(h,{todos:n,cardId:t._id})})]}),(0,s.jsx)(g,{card:t._id,tags:t.tags})]})}},8588:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n(5893),r=n(1163),l=n(9019),a=n(1433),i=n(7294),d=n(3999);function o(){let[e,t]=(0,i.useState)([]),n=(0,r.useRouter)(),{share:o}=n.query;return(0,i.useEffect)(()=>{if("string"==typeof o){let e=JSON.parse(d.ZP.decode(o));t(e.cards)}},[n.query.share]),(0,s.jsxs)("div",{className:"bg-primary-content h-screen h-full",children:[(0,s.jsxs)("div",{className:"navbar bg-base-100 inline-flex gap-x-5",children:[(0,s.jsx)("a",{className:"btn btn-ghost normal-case text-xl",children:"Liquid-List"}),(0,s.jsxs)("button",{className:"btn",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"currentColor",d:"M8 14h2v-2q0-.425.288-.713T11 11h2v2l3-3l-3-3v2h-2q-1.25 0-2.125.875T8 12v2Zm-6 7q-.425 0-.713-.288T1 20q0-.425.288-.713T2 19h20q.425 0 .713.288T23 20q0 .425-.288.713T22 21H2Zm2-3q-.825 0-1.413-.588T2 16V5q0-.825.588-1.413T4 3h16q.825 0 1.413.588T22 5v11q0 .825-.588 1.413T20 18H4Z"})}),(0,s.jsx)("span",{children:"share"})]})]}),(0,s.jsx)("div",{className:"modal",id:"reset",children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"\xcates-vous sure de vouloir reset ?"}),(0,s.jsxs)("p",{className:"py-4",children:["Vos cards seront ",(0,s.jsx)("span",{className:"font-extrabold text-error",children:"supprim\xe9s"})," sans possibilit\xe9s de retour en arri\xe8re"]}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("a",{href:"#",className:"btn btn-error btn-outline",onClick:()=>{(0,l.WG)([])},children:"Oui"}),(0,s.jsx)("a",{href:"#",className:"btn btn-outline",children:"Non"})]})]})}),(0,s.jsx)("div",{className:"m-4 flex gap-x-2 gap-y-2 flex-wrap justify-evenly",children:e.map(e=>(0,s.jsx)(a.Z,{state:e},e._id))})]})}},9019:function(e,t,n){"use strict";n.d(t,{Kb:function(){return x},LH:function(){return c},SQ:function(){return h},WG:function(){return a},_7:function(){return i},f1:function(){return u},rR:function(){return d},vm:function(){return l},xi:function(){return o}});var s=n(1118),r=n(3416);let l=(0,s.cd)("cards",[],{encode:e=>JSON.stringify(e),decode(e){try{return JSON.parse(e)}catch(t){return e}}}),a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l.set(e||l.get())},i=e=>l.get().find(t=>t._id===e),d=e=>{var t;return null===(t=i(e))||void 0===t?void 0:t.todos},o=(e,t)=>{let n=i(e);n&&(n.name=t),a()},c=()=>(l.set([...l.get(),{_id:(0,r.x0)(6),name:"",tags:[],todos:[]}]),l.get()),u=e=>{let t=l.get().filter(t=>t._id!==e);a(t)},h=(e,t)=>{let n=i(e);return n.tags.find(e=>e._id===t._id)||(n.tags=[...n.tags,t],a()),l.get()},x=(e,t)=>{let n=i(e);return n.tags=n.tags.filter(e=>e._id!==t._id),a(),l.get()}},7373:function(e,t,n){"use strict";n.d(t,{_U:function(){return a},q1:function(){return l}});var s=n(7221),r=n(1118);let l=(0,r.cd)("tags",[],{encode:e=>JSON.stringify(e),decode(e){try{return JSON.parse(e)}catch(t){return e}}}),a=(0,s.aD)(l,"addTag",(e,t)=>{let n=e.get();return n.push(t),e.set(n),e.get()});(0,s.aD)(l,"removeTag",(e,t)=>{let n=e.get(),s=n.filter(e=>e._id!==t);return e.set(s),e.get()}),(0,s.aD)(l,"editTag",(e,t,n)=>{let s=e.get(),r=s.findIndex(e=>e._id===n);return s[r].name=t,e.set(s),e.get()})},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[101,774,888,179],function(){return e(e.s=2642)}),_N_E=e.O()}]);