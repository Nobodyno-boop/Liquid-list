(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{7833:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list",function(){return n(685)}])},1433:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var s=n(5893),r=n(7294);let l=e=>{let{value:t="",placeHolder:n,onUpdate:l,size:i="sm"}=e,[a,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),u=(0,r.useRef)(),h=(0,r.useRef)();(0,r.useEffect)(()=>{o(t)},[]);let x=()=>{c(!0)};(0,r.useEffect)(()=>{d&&h.current.focus()},[d]);let m=()=>{o(h.current.value),c(!1),l&&l(h.current.value)},v=e=>{("Enter"===e.code||"Enter"===e.key)&&m()};return(0,s.jsx)(s.Fragment,{children:d?(0,s.jsx)("div",{children:(0,s.jsx)("input",{className:"input input-".concat(i," input-ghost w-full max-w-xs"),ref:h,type:"text",placeholder:n,defaultValue:a,onBlur:m,onKeyUp:v})}):(0,s.jsx)("div",{ref:u,onDoubleClick:x,children:a.length>0?a:(0,s.jsx)("span",{className:"text-primary/50",children:n})})})};var i=n(175),a=n(3416),o=n(9019);(0,i.c)([]);let d=(e,t,n)=>{let s=(0,o.rR)(e);if(s){let e=s.find(e=>e._id===t);(null==n?void 0:n.name)&&(e.name=n.name),(null==n?void 0:n.done)&&(e.done=n.done),(0,o.WG)();return}},c=(e,t)=>{let n=(0,o._7)(e);if(n){console.log("a");let e=n.todos.filter(e=>e._id!==t);console.log(e),n.todos=e,(0,o.WG)()}},u=e=>{let t=(0,o.rR)(e),n={done:!1,name:"",_id:(0,a.x0)(6)};return t?(t.push(n),(0,o.WG)(),n):null},h=e=>{let{todos:t,cardId:n}=e,[i,a]=(0,r.useState)(t),h=(e,t)=>{console.log("update",e,t),d(n,e,{name:t})},x=(e,t)=>{d(n,e,{done:t})},m=e=>{c(n,e),(0,o.rR)(n),a(t=>t.filter(t=>t._id!==e))},v=()=>{let e=u(n);if(e){let e=(0,o.rR)(n);a([...e])}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"btn btn-square btn-outline w-full mb-4",onClick:v,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"currentColor",d:"M17.5 21h1v-2.5H21v-1h-2.5V15h-1v2.5H15v1h2.5V21Zm.5 2q-2.075 0-3.538-1.463T13 18q0-2.075 1.463-3.538T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23ZM9 7V5h12v2H9ZM5 20q-.825 0-1.413-.588T3 18q0-.825.588-1.413T5 16q.825 0 1.413.588T7 18q0 .825-.588 1.413T5 20Zm0-6q-.825 0-1.413-.588T3 12q0-.825.588-1.413T5 10q.825 0 1.413.588T7 12q0 .825-.588 1.413T5 14Zm0-6q-.825 0-1.413-.588T3 6q0-.825.588-1.413T5 4q.825 0 1.413.588T7 6q0 .825-.588 1.413T5 8Zm4 11v-2h2.075Q11 17.5 11 18t.075 1H9Zm0-6v-2h9q-1.425 0-2.675.537T13.125 13H9Z"})}),(0,s.jsx)("span",{children:"ajouter une todo"})]}),(0,s.jsx)("ul",{className:"list-outside text-base-100 flex flex-col gap-y-3",children:i.map((e,t)=>(0,s.jsxs)("li",{className:"flex flex-row gap-x-3",children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:e.done,onChange:t=>x(e._id,t.target.checked),className:"checkbox"}),(0,s.jsx)("div",{className:"text-primary break-all",children:(0,s.jsx)(l,{placeHolder:"todo",value:e.name,size:"xs",onUpdate:t=>h(e._id,t)})}),(0,s.jsx)("button",{className:"btn btn-square btn-xs ml-auto",onClick:()=>m(e._id),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},e._id))})]})};var x=n(7373),m=n(3218);let v=e=>{let{tag:t,deleteTag:n}=e,r=()=>{n(t)};return(0,s.jsxs)("div",{className:"badge badge-outline uppercase font-semibold",children:[t.name,(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-4 h-4 stroke-current",onClick:r,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})},g=e=>{let{card:t,tags:n}=e,l=(0,m.o)(x.q1),[i,d]=(0,r.useState)(n),[c,u]=(0,r.useState)(""),h=e=>{(0,o.SQ)(t,e),d(t=>[...t,e])},g=e=>{(0,o.Kb)(t,e),d(t=>t.filter(t=>t._id!==e._id))},f=e=>{if("Enter"===e.code||"Enter"===e.key){let e={name:c,_id:(0,a.x0)(5)};(0,x._U)(e),h(e),u(""),(0,o.WG)()}};return(0,s.jsxs)("div",{className:"card-actions justify-end",children:[i.map(e=>(0,s.jsx)(v,{tag:e,deleteTag:g},e._id)),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,className:"btn m-1",children:"Add tag"}),(0,s.jsxs)("ul",{tabIndex:0,className:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-64",children:[(0,s.jsx)("li",{children:(0,s.jsx)("input",{className:"input input-bordered",type:"text",value:c,placeholder:"nouveau tag",onChange:e=>u(e.target.value),onKeyUp:f})}),l.map(e=>(0,s.jsx)("li",{onClick:()=>h(e),children:(0,s.jsx)("a",{children:e.name})},"".concat(t._id,"-").concat(e._id)))]})]})]})},f=e=>{let{state:t}=e,[n,i]=(0,r.useState)(t.todos),[a,d]=(0,r.useState)(t.name),c=()=>{(0,o.f1)(t._id)};return(0,s.jsxs)("div",{className:"card w-96 bg-neutral shadow-xl",children:[(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"card-actions justify-end",children:(0,s.jsx)("button",{className:"btn btn-square btn-sm",onClick:c,children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),(0,s.jsx)("h2",{className:"card-title text-primary",children:(0,s.jsx)(l,{placeHolder:"title",value:a,onUpdate:e=>(0,o.xi)(t._id,e)})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(h,{todos:n,cardId:t._id})})]}),(0,s.jsx)(g,{card:t._id,tags:t.tags})]})}},685:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(5893),r=n(1433),l=n(3218),i=n(9019),a=n(7294),o=n(7373),d=n(3999);let c=e=>(e.startsWith("/")&&(e=e.substring(1)),"".concat("/liquid-list/").concat(e));function u(){let[e,t]=(0,a.useState)([]),n=(0,l.o)(i.vm),[u,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t(n)},[n]);let x=()=>{let e=i.vm.get(),t=o.q1.get(),n=JSON.stringify({cards:e,tags:t}),s=d.ZP.encode(n),r=c("/share/");navigator.clipboard.writeText("".concat(window.location.origin+r+s)).then(e=>{h(!0),setTimeout(()=>{h(!1)},3e3)})};return(0,s.jsxs)("div",{className:"bg-primary-content h-screen h-full relative",children:[(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)("div",{className:"alert max-w-lg shadow-lg absolute top-20 z-10 transition-all duration-200 ".concat(u?"opacity-100":"opacity-0"),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info flex-shrink-0 w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:"Le lien share \xe0 \xe9t\xe9 copier dans votre press-papier"})]})})}),(0,s.jsxs)("div",{className:"navbar bg-base-100 inline-flex gap-x-5",children:[(0,s.jsx)("a",{className:"btn btn-ghost normal-case text-xl",children:"Liquid-List"}),(0,s.jsxs)("button",{className:"btn",onClick:()=>{let e=(0,i.LH)();t(e)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"currentColor",d:"M11 19v-6H5v-2h6V5h2v6h6v2h-6v6h-2Z"})}),(0,s.jsx)("span",{children:"ajouter une card"})]}),(0,s.jsxs)("a",{href:"#reset",className:"btn",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"currentColor",d:"M9 3v1H4v2h1v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2Z"})}),(0,s.jsx)("span",{children:"reset"})]}),(0,s.jsxs)("button",{className:"btn",onClick:x,children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:"currentColor",d:"M8 14h2v-2q0-.425.288-.713T11 11h2v2l3-3l-3-3v2h-2q-1.25 0-2.125.875T8 12v2Zm-6 7q-.425 0-.713-.288T1 20q0-.425.288-.713T2 19h20q.425 0 .713.288T23 20q0 .425-.288.713T22 21H2Zm2-3q-.825 0-1.413-.588T2 16V5q0-.825.588-1.413T4 3h16q.825 0 1.413.588T22 5v11q0 .825-.588 1.413T20 18H4Z"})}),(0,s.jsx)("span",{children:"share"})]})]}),(0,s.jsx)("div",{className:"modal",id:"reset",children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"\xcates-vous sure de vouloir reset ?"}),(0,s.jsxs)("p",{className:"py-4",children:["Vos cards seront ",(0,s.jsx)("span",{className:"font-extrabold text-error",children:"supprim\xe9s"})," sans possibilit\xe9s de retour en arri\xe8re"]}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("a",{href:"#",className:"btn btn-error btn-outline",onClick:()=>{(0,i.WG)([])},children:"Oui"}),(0,s.jsx)("a",{href:"#",className:"btn btn-outline",children:"Non"})]})]})}),(0,s.jsx)("div",{className:"m-4 flex gap-x-2 gap-y-2 flex-wrap justify-evenly",children:e.map(e=>(0,s.jsx)(r.Z,{state:e},e._id))})]})}},9019:function(e,t,n){"use strict";n.d(t,{Kb:function(){return x},LH:function(){return c},SQ:function(){return h},WG:function(){return i},_7:function(){return a},f1:function(){return u},rR:function(){return o},vm:function(){return l},xi:function(){return d}});var s=n(1118),r=n(3416);let l=(0,s.cd)("cards",[],{encode:e=>JSON.stringify(e),decode(e){try{return JSON.parse(e)}catch(t){return e}}}),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l.set(e||l.get())},a=e=>l.get().find(t=>t._id===e),o=e=>{var t;return null===(t=a(e))||void 0===t?void 0:t.todos},d=(e,t)=>{let n=a(e);n&&(n.name=t),i()},c=()=>(l.set([...l.get(),{_id:(0,r.x0)(6),name:"",tags:[],todos:[]}]),l.get()),u=e=>{let t=l.get().filter(t=>t._id!==e);i(t)},h=(e,t)=>{let n=a(e);return n.tags.find(e=>e._id===t._id)||(n.tags=[...n.tags,t],i()),l.get()},x=(e,t)=>{let n=a(e);return n.tags=n.tags.filter(e=>e._id!==t._id),i(),l.get()}},7373:function(e,t,n){"use strict";n.d(t,{_U:function(){return i},q1:function(){return l}});var s=n(7221),r=n(1118);let l=(0,r.cd)("tags",[],{encode:e=>JSON.stringify(e),decode(e){try{return JSON.parse(e)}catch(t){return e}}}),i=(0,s.aD)(l,"addTag",(e,t)=>{let n=e.get();return n.push(t),e.set(n),e.get()});(0,s.aD)(l,"removeTag",(e,t)=>{let n=e.get(),s=n.filter(e=>e._id!==t);return e.set(s),e.get()}),(0,s.aD)(l,"editTag",(e,t,n)=>{let s=e.get(),r=s.findIndex(e=>e._id===n);return s[r].name=t,e.set(s),e.get()})}},function(e){e.O(0,[101,774,888,179],function(){return e(e.s=7833)}),_N_E=e.O()}]);